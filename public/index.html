<!-- File: public/index.html -->
<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI วิเคราะห์สุขภาพเบื้องต้น</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Link to external CSS file -->
    <link rel="stylesheet" href="styles.css"> 
</head>
<body>
<main class="container">
        <button id="open-profile-button" class="icon-button">⚙️ โปรไฟล์สุขภาพ</button>

    <div id="app-card" class="card">
        
        <!-- View 1: The Form -->
        <div id="form-wrapper">
            <h1>AI วิเคราะห์สุขภาพเบื้องต้น</h1>
            <h2 style="font-size: 1.1rem; color: #6c757d; text-align: center; margin-top: -1rem; margin-bottom: 2rem;">กรุณาให้ข้อมูลที่ละเอียดที่สุดเพื่อผลลัพธ์ที่แม่นยำ</h2>
            <form id="health-form">
                <h3 class="section-title">ข้อมูลส่วนตัว</h3>
                <div class="form-grid">
                    <div class="form-group"><label for="name">ชื่อ</label><input type="text" id="name" placeholder="ชื่อเล่น หรือชื่อจริง" required></div>
                    <div class="form-group"><label for="age">อายุ (ปี)</label><input type="number" id="age" placeholder="เช่น 25" required></div>
                    <div class="form-group"><label for="sex">เพศ</label>
                        <div class="radio-group" style="padding-top: 14px;">
                            <label><input type="radio" name="sex" value="ชาย" checked> ชาย</label>
                            <label><input type="radio" name="sex" value="หญิง"> หญิง</label>
                        </div>
                    </div>
                </div>
                <h3 class="section-title">ข้อมูลร่างกาย</h3>
                <div class="form-grid">
                    <div class="form-group"><label for="weight">น้ำหนัก (กก.)</label><input type="number" id="weight" step="0.1" placeholder="เช่น 65.5" required></div>
                    <div class="form-group"><label for="height">ส่วนสูง (ซม.)</label><input type="number" id="height" placeholder="เช่น 170" required></div>
                </div>
                <h3 class="section-title">อาการหลัก (เลือกได้มากกว่า 1 ข้อ)</h3>
                <div class="symptom-category">
                    <fieldset>
                        <legend>อาการทั่วไป</legend>
                        <div class="symptom-grid">
                            <label><input type="checkbox" name="symptom" value="มีไข้"> มีไข้</label>
                            <label><input type="checkbox" name="symptom" value="อ่อนเพลีย/ไม่มีแรง"> อ่อนเพลีย/ไม่มีแรง</label>
                            <label><input type="checkbox" name="symptom" value="ปวดเมื่อยตามตัว"> ปวดเมื่อยตามตัว</label>
                            <label><input type="checkbox" name="symptom" value="หนาวสั่น"> หนาวสั่น</label>
                        </div>
                    </fieldset>
                </div>
                <!-- หมวดหมู่: ศีรษะและลำคอ -->
                <div class="symptom-category">
                    <fieldset>
                        <legend>ศีรษะและลำคอ</legend>
                        <div class="symptom-grid">
                            <label><input type="checkbox" name="symptom" value="ปวดศีรษะ"> ปวดศีรษะ</label>
                            <label><input type="checkbox" name="symptom" value="เวียนศีรษะ/บ้านหมุน"> เวียนศีรษะ/บ้านหมุน</label>
                            <label><input type="checkbox" name="symptom" value="เจ็บคอ"> เจ็บคอ</label>
                            <label><input type="checkbox" name="symptom" value="คัดจมูก/น้ำมูกไหล"> คัดจมูก/น้ำมูกไหล</label>
                        </div>
                    </fieldset>
                </div>

                <!-- หมวดหมู่: ระบบทางเดินหายใจ -->
                <div class="symptom-category">
                    <fieldset>
                        <legend>ระบบทางเดินหายใจ</legend>
                        <div class="symptom-grid">
                            <label><input type="checkbox" name="symptom" value="ไอแห้ง"> ไอแห้ง</label>
                            <label><input type="checkbox" name="symptom" value="ไอมีเสมหะ"> ไอมีเสมหะ</label>
                            <label><input type="checkbox" name="symptom" value="หายใจลำบาก/หายใจถี่"> หายใจลำบาก/หายใจถี่</label>
                            <label><input type="checkbox" name="symptom" value="เจ็บหน้าอก"> เจ็บหน้าอก</label>
                        </div>
                    </fieldset>
                </div>

                <!-- หมวดหมู่: ระบบทางเดินอาหาร -->
                <div class="symptom-category">
                    <fieldset>
                        <legend>ระบบทางเดินอาหาร</legend>
                        <div class="symptom-grid">
                            <label><input type="checkbox" name="symptom" value="ปวดท้อง"> ปวดท้อง</label>
                            <label><input type="checkbox" name="symptom" value="คลื่นไส้/อาเจียน"> คลื่นไส้/อาเจียน</label>
                            <label><input type="checkbox" name="symptom" value="ท้องเสีย"> ท้องเสีย</label>
                            <label><input type="checkbox" name="symptom" value="ท้องผูก"> ท้องผูก</label>
                            <label><input type="checkbox" name="symptom" value="ท้องอืด"> ท้องอืด</label>
                        </div>
                    </fieldset>
                </div>

                <h3 class="section-title">ข้อมูลเพิ่มเติมเกี่ยวกับอาการ</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="symptom-duration">มีอาการนี้มานานเท่าไหร่แล้ว?</label>
                        <input type="text" id="symptom-duration" placeholder="เช่น 2-3 วัน, ประมาณ 1 สัปดาห์" required>
                    </div>
                    <div class="form-group">
                        <label for="previous-meal">อาหารมื้อล่าสุดที่ทานคืออะไร?</label>
                        <input type="text" id="previous-meal" placeholder="เช่น ส้มตำปูปลาร้า, ข้าวผัดกุ้ง">
                    </div>
                </div>
                <!-- ช่องอธิบายเพิ่มเติม (สำคัญ) -->
                 <h3 class="section-title">ข้อมูลอาการเพิ่มเติม</h3>
                <div class="form-group full-span" style="margin-top: 1.5rem;">
                    <label for="other-symptoms">อาการอื่นๆ เพิ่มเติม (ถ้ามี)</label>
                    <textarea id="other-symptoms" rows="4" placeholder="กรุณาอธิบายรายละเอียดเพิ่มเติม เช่น ตำแหน่งที่ปวด, ปวดแบบไหน, เป็นมานานเท่าไหร่"></textarea>
                </div>
                <button type="submit" class="main-button">ส่งข้อมูลเพื่อวิเคราะห์</button>
            </form>
        </div>

        <!-- View 2: Loading State -->
        <div id="loading-wrapper">
            <div class="loader"></div>
            <h2 style="font-size: 1.5rem; text-align:center;">AI กำลังวิเคราะห์ข้อมูลของคุณ...</h2>
            <p style="text-align:center; color:#6c757d;">ขั้นตอนนี้อาจใช้เวลาสักครู่</p>
        </div>

        <!-- View 3: Result Display -->
        <div id="result-wrapper"></div>
        
        <!-- View 4: Error Display -->
        <div id="error-wrapper"></div>
    </div>


    <!-- Modal -->
    <div id="profile-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <span id="close-modal" class="close-button">×</span>
        <h2>โปรไฟล์สุขภาพของฉัน</h2>
        <p>การให้ข้อมูลนี้จะช่วยให้ AI วิเคราะห์ได้แม่นยำยิ่งขึ้น (ข้อมูลจะถูกบันทึกไว้ในเบราว์เซอร์ของคุณเท่านั้น)</p>
        <form id="profile-form">
            <div class="form-group">
                <label>โรคประจำตัว (เลือกได้มากกว่า 1 ข้อ)</label>
                <div class="profile-grid">
                    <label><input type="checkbox" name="condition" value="โรคเบาหวาน"> เบาหวาน</label>
                    <label><input type="checkbox" name="condition" value="โรคความดันโลหิตสูง"> ความดันสูง</label>
                    <label><input type="checkbox" name="condition" value="โรคภูมิแพ้/หอบหืด"> ภูมิแพ้/หอบหืด</label>
                    <label><input type="checkbox" name="condition" value="โรคหัวใจ"> โรคหัวใจ</label>
                    <label><input type="checkbox" name="condition" value="โรคกระเพาะอาหาร/กรดไหลย้อน"> โรคกระเพาะ/กรดไหลย้อน</label>
                </div>
            </div>
            <div class="form-group">
                <label for="drug-allergy">ยาที่แพ้ (ถ้ามี)</label>
                <input type="text" id="drug-allergy" placeholder="เช่น เพนนิซิลลิน (Penicillin)">
            </div>
            <div class="form-group">
                <label>ไลฟ์สไตล์</label>
                <div class="profile-grid">
                    <label><input type="checkbox" name="lifestyle" value="สูบบุหรี่เป็นประจำ"> สูบบุหรี่</label>
                    <label><input type="checkbox" name="lifestyle" value="ดื่มแอลกอฮอล์เป็นประจำ"> ดื่มแอลกอฮอล์</label>
                </div>
            </div>
                            <div class="form-group" style="margin-top: 1rem;">
                    <label for="profile-notes">ข้อมูลสุขภาพอื่นๆ ที่สำคัญ (นอกเหนือจากด้านบน)</label>
                    <textarea id="profile-notes" rows="3" placeholder="เช่น: กำลังตั้งครรภ์, มีภาวะโลหิตจาง, แพ้อาหารทะเล, เพิ่งหายจากโควิด"></textarea>
                </div>
            <button type="submit" class="main-button">บันทึกโปรไฟล์</button>
        </form>
    </div>
</div>
</main>

<!-- Link to external JavaScript file -->
    <script type="module" src="js/app.js"></script>
</body>
</html>